import "babel-polyfill";

const fetcher = async (url, method) => {
  const raw = await fetch(url, { method });
  return raw.json();
};

export default async (addresses, googleApiKey) => {
  const result = [];
  for (let address of addresses) {
    const url = `https://maps.googleapis.com/maps/api/geocode/json?address=${address}&key=${googleApiKey}`;
    const location = await fetcher(url, 'GET').then(r =>
      r.results[0].geometry.location
    );
    result.push(location);
  }
  return result;
};